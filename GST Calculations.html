
<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    
	<link rel="stylesheet" type="text/css" href="css/allcss.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
 
	
    
  </head>
  <body>
          <div class="bs-example">
            <div class="panel panel-primary">
            <div class="panel-heading">
              <strong>
                Transaction Details
              </strong>
            </div>
            <div class="panel-body">
              <div class="table-responsive">
                <table class="table table-bordered">
                  <tr>
                    <td colspan="2">
                      <table id="invoice-item-table"class="table table-bordered">

                     <tr>

                    
                      <th width="2%"rowspan="2">Sr No.</th>
                      <th width="10%"rowspan="2">Description</th>
                      <th width="6%"rowspan="2">HSN/SAC</th>
                      <th width="4%"rowspan="2">Quantity</th>
                      <th width="5%"rowspan="2">Unit</th>
                      <th width="6%"rowspan="2">Rate</th>
                      <th width="8%"rowspan="2">Amount</th>
                      <th width="8%"colspan="2">CGST</th>
                      <th  width="8%" colspan="2">SGST</th>
                      <th  width="8%" colspan="2">IGST</th>
                      <th width="10%" rowspan="2">Total</th>
                      <th width="2%" rowspan="2"></th>
                  </tr>
                  <tr>
                  <th width="6%">Rate</th>
                  <th width="7%">Amount</th>
                  <th width="6%">Rate</th>
                  <th width="7%">Amount</th>
                  <th width="6%">Rate</th>
                  <th width="7%">Amount</th>
                  </tr>
                  <tr>
                      <td><span id="sr_no">1</span></td>
                      <td><input type="text" name="item_name[]" id="item_name1" class="form-control " /></td>
                      <td><input type="text" name="hsn[]" id="hsn" data-srno="1" class="form-control"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>
                      <td><input type="text" name="order_item_quantity[]" id="order_item_quantity1" data-srno="1" class="form-control " onkeypress="return (event.charCode >32 && event.charCode <= 57)"/></td>
                      <td><input type="text" name="unit[]" id="unit" class="form-control"/></td>
                      <td><input type="text" name="order_item_price[]" id="order_item_price1" data-srno="1" class="form-control order_item_price" onkeypress="return (event.charCode >32 && event.charCode <= 57)" /></td>
                      <td><input type="text" name="order_item_actual_amount[]" id="order_item_actual_amount1" data-srno="1" class="form-control" readonly /></td>
                      <td><input type="text" name="order_item_tax1_rate[]" id="order_item_tax1_rate1" data-srno="1" class="form-control order_item_tax1_rate"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" /></td>
                      <td><input type="text" name="order_item_tax1_amount[]" id="order_item_tax1_amount1" data-srno="1"  class="form-control "readonly/></td>
                      <td><input type="text" name="order_item_tax2_rate[]" id="order_item_tax2_rate1" data-srno="1" class="form-control order_item_tax2_rate"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>
                      <td><input type="text" name="order_item_tax2_amount[]" id="order_item_tax2_amount1" data-srno="1"  class="form-control" readonly/></td>
                      <td><input type="text" name="order_item_tax3_rate[]" id="order_item_tax3_rate1" data-srno="1" class="form-control order_item_tax3_rate"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>
                      <td><input type="text" name="order_item_tax3_amount[]" id="order_item_tax3_amount1" data-srno="1" readonly class="form-control" /></td>
                      <td><input type="text" name="order_item_final_amount[]" id="order_item_final_amount1" data-srno="1" readonly class="form-control" /></td>
                      <td></td>
                    </tr>
                  </table>
                  <div align="right">
                    <button type="button" name="add_row" id="add_row" class="btn btn-success btn-s glyphicon glyphicon-plus"></button>
                  </div>
                </td>
              </tr>
            </table>


                <table class="table table-bordered">
                  <tbody>
                    <tr>
                      <td width="50%"align="cener"class="field-label active" colspan="2">
                        <label>Bank Details</label>
                      </td>
                      <td width="25%"align="right"class="field-label active">
                          <label>Total Amount Without Tax</label>
                      </td>
                      <td width="25%"><span id="total_Without_Tax"></span>
                      </td>

                    </tr>

                    <tr>
                        <td width="25%"align="left"class="field-label active">
                          <label>Account Number</label>
                        </td>
                        <td width="25%">
                          123
                        </td>
                        <td width="25%"align="right"class="field-label active">
                            <label>CGST</label>
                        </td>
                        <td width="25%"><span id="total_cgst"></span>
                        </td>
                      </tr>


                      <tr>
                          <td width="25%"align="left"class="field-label active">
                            <label>IFSC Code</label>
                          </td>
                          <td width="25%">
                            123jkhdfjh
                          </td>
                          <td width="25%"align="right"class="field-label active">
                              <label>SGST</label>
                          </td>
                          <td width="25%"><span id="total_sgst"></span>
                          </td>
                        </tr>

                        <tr>
                            <td width="25%"align="left"class="field-label active">
                              <label>Bank Name</label>
                            </td>
                            <td width="25%">
                              1khdfjh
                            </td>
                            <td width="25%"align="right"class="field-label active">
                                <label>IGST</label>
                            </td>
                            <td width="25%"><span id="total_igst"></span>
                            </td>
                          </tr>

                          <tr>
                              <td width="75%"align="right"class="field-label active"colspan="3">
                                  <label>Total Amount With Tax</label>
                              </td>
                              <td width="25%"><span id="total_with_tax"></span>
                              </td>
                            </tr>
                  </tbody>


                </table>

              </div>
            </div>
            </div>
          </div>
         

</body>
      <script>
      $(document).ready(function(){
        var final_total_amt = $('#final_total_amt').text();
        var count = 1;
        
        $(document).on('click', '#add_row', function(){
          count++;
          var html_code = '';
          html_code += '<tr id="row_id_'+count+'">';
          html_code += '<td><span id="sr_no">'+count+'</span></td>';
          
          html_code += '<td><input type="text" name="item_name[]" id="item_name'+count+'" class="form-control " /></td>';
          html_code += '<td><input type="text" name="hsn[]" id="hsn'+count+'" data-srno="'+count+'" class="form-control" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>';
          html_code += '<td><input type="text" name="order_item_quantity[]" id="order_item_quantity'+count+'" data-srno="'+count+'" class="form-control " onkeypress="return (event.charCode >32 && event.charCode <= 57)"/></td>';
          html_code += '<td><input type="text" name="unit[]" id="unit'+count+'" data-srno="'+count+'" class="form-control " /></td>';
          html_code += '<td><input type="text" name="order_item_price[]" id="order_item_price'+count+'" data-srno="'+count+'"  class="form-control order_item_price" onkeypress="return (event.charCode >32 && event.charCode <= 57)"/></td>';
          html_code += '<td><input type="text" name="order_item_actual_amount[]" id="order_item_actual_amount'+count+'" data-srno="'+count+'" class="form-control order_item_actual_amount" readonly /></td>';
          
          html_code += '<td><input type="text" name="order_item_tax1_rate[]" id="order_item_tax1_rate'+count+'" data-srno="'+count+'" class="form-control order_item_tax1_rate" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" /></td>';
          html_code += '<td><input type="text" name="order_item_tax1_amount[]" id="order_item_tax1_amount'+count+'" data-srno="'+count+'" readonly class="form-control order_item_tax1_amount" /></td>';
          html_code += '<td><input type="text" name="order_item_tax2_rate[]" id="order_item_tax2_rate'+count+'" data-srno="'+count+'" class="form-control order_item_tax2_rate"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>';
          html_code += '<td><input type="text" name="order_item_tax2_amount[]" id="order_item_tax2_amount'+count+'" data-srno="'+count+'" readonly class="form-control order_item_tax2_amount" /></td>';
          html_code += '<td><input type="text" name="order_item_tax3_rate[]" id="order_item_tax3_rate'+count+'" data-srno="'+count+'" class="form-control order_item_tax3_rate"onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"/></td>';
          html_code += '<td><input type="text" name="order_item_tax3_amount[]" id="order_item_tax3_amount'+count+'" data-srno="'+count+'" readonly class="form-control  order_item_tax3_amount" /></td>';
          html_code += '<td><input type="text" name="order_item_final_amount[]" id="order_item_final_amount'+count+'" data-srno="'+count+'" readonly class="form-control  order_item_final_amount" /></td>';
          html_code += '<td><button type="button" name="remove_row" id="'+count+'" class="btn btn-danger btn-s remove_row glyphicon glyphicon-trash"></button></td>';
          html_code += '</tr>';
          $('#invoice-item-table').append(html_code);
        });
        






        //remove row function
        
        $(document).on('click', '.remove_row', function(){
          var row_id = $(this).attr("id");

          //total without tax remove
          var item_amount = $('#order_item_actual_amount'+row_id).val();
          var final_amount = $('#total_Without_Tax').text();
          var result_amount = parseFloat(final_amount) - parseFloat(item_amount);
          result_amount=result_amount.toFixed(2);
          $('#total_Without_Tax').text(result_amount);



          //cgst Remove
          var cgst_amount = $('#order_item_tax1_amount'+row_id).val();
          var final_cgst_amount = $('#total_cgst').text();
          var result_cgst_amount = parseFloat(final_cgst_amount) - parseFloat(cgst_amount);
          result_cgst_amount=result_cgst_amount.toFixed(2);
          $('#total_cgst').text(result_cgst_amount);


        //sgst Remove
           var sgst_amount = $('#order_item_tax2_amount'+row_id).val();
          var final_sgst_amount = $('#total_sgst').text();
          var result_sgst_amount = parseFloat(final_sgst_amount) - parseFloat(sgst_amount);
          result_sgst_amount=result_sgst_amount.toFixed(2);
          $('#total_sgst').text(result_sgst_amount);

         //igst Remove
           var igst_amount = $('#order_item_tax3_amount'+row_id).val();
          var final_igst_amount = $('#total_igst').text();
          var result_igst_amount = parseFloat(final_igst_amount) - parseFloat(igst_amount);
          result_igst_amount=result_igst_amount.toFixed(2);
          $('#total_igst').text(result_igst_amount);


          //Total With Tax remove
          var amount_without_tax = $('#order_item_final_amount'+row_id).val();
          var final_amount_without_tax = $('#total_with_tax').text();
          var result_amount_without_tax = parseFloat(final_amount_without_tax) - parseFloat(amount_without_tax);
          result_amount_without_tax=result_amount_without_tax.toFixed(2);
          $('#total_with_tax').text(result_amount_without_tax);

          $('#row_id_'+row_id).remove();
          count--;
        });



        //calculte the tax and amount per row
        function cal_final_total(count)
        {
          var total_without_tax = 0;
          var total_cgst_amount=0;
          var total_sgst_amount=0;
          var total_igst_amount=0;
          var total_withtax=0;
          for(j=1; j<=count; j++)
          {
            var quantity = 0;
            var price = 0;
            var actual_amount = 0;
            var tax1_rate = 0;
            var tax1_amount = 0;
            var tax2_rate = 0;
            var tax2_amount = 0;
            var tax3_rate = 0;
            var tax3_amount = 0;
            var item_total = 0;
            //get value by id
            quantity = $('#order_item_quantity'+j).val();
            if(quantity > 0)
            {
              price = $('#order_item_price'+j).val();
              if(price > 0)
              {
                actual_amount = parseFloat(quantity) * parseFloat(price);
                actual_amount=actual_amount.toFixed(2);
                //set value by id
                $('#order_item_actual_amount'+j).val(actual_amount);

                tax1_rate = $('#order_item_tax1_rate'+j).val();
                if(tax1_rate >= 0)
                {
                  tax1_amount = parseFloat(actual_amount)*parseFloat(tax1_rate)/100;
                  //tax1_amount = isNaN(tax1_amount) ? '0.00' : tax1_amount;
                  tax1_amount=tax1_amount.toFixed(2);
                  $('#order_item_tax1_amount'+j).val(tax1_amount);
                }
                tax2_rate = $('#order_item_tax2_rate'+j).val();
                if(tax2_rate >= 0)
                {
                  tax2_amount = parseFloat(actual_amount)*parseFloat(tax2_rate)/100;
                  //tax2_amount = isNaN(tax2_amount) ? '0.00' : tax2_amount;
                  tax2_amount=tax2_amount.toFixed(2);
                  $('#order_item_tax2_amount'+j).val(tax2_amount);
                }
                tax3_rate = $('#order_item_tax3_rate'+j).val();
                if(tax3_rate >= 0)
                {
                  tax3_amount = parseFloat(actual_amount)*parseFloat(tax3_rate)/100;
                  //tax3_amount = isNaN(tax3_amount) ? '0.00' : tax3_amount;
                  tax3_amount=tax3_amount.toFixed(2);
                  $('#order_item_tax3_amount'+j).val(tax3_amount);
                }
               

                //total without tax
                total_without_tax=parseFloat(total_without_tax)+parseFloat(actual_amount)
                total_without_tax=total_without_tax.toFixed(2);

                //cgst_calculatioms
                total_cgst_amount=parseFloat(total_cgst_amount)+parseFloat(tax1_amount)
                total_cgst_amount=total_cgst_amount.toFixed(2);

                //sgst_calculation
                total_sgst_amount=parseFloat(total_sgst_amount)+parseFloat(tax2_amount)
                total_sgst_amount=total_sgst_amount.toFixed(2);

                //igst_calculation
                total_igst_amount=parseFloat(total_igst_amount)+parseFloat(tax3_amount)
                total_igst_amount=total_igst_amount.toFixed(2);

                //Total With Tax
                item_total = parseFloat(actual_amount) + parseFloat(tax1_amount) + parseFloat(tax2_amount) + parseFloat(tax3_amount);
                item_total=item_total.toFixed(2);


                total_withtax = parseFloat(total_withtax) + parseFloat(item_total);
                total_withtax=total_withtax.toFixed(2);
                //set total value in each row
                $('#order_item_final_amount'+j).val(item_total);
              }
            }
          }

          $('#total_Without_Tax').text(total_without_tax);
          $('#total_cgst').text(total_cgst_amount);
          $('#total_sgst').text(total_sgst_amount);
          $('#total_igst').text(total_igst_amount);
          $('#total_with_tax').text(total_withtax);
        }

        $(document).on('blur', '.order_item_price', function(){
          cal_final_total(count);
        });

        $(document).on('blur','.order_item_tax1_rate', function(){
          cal_final_total(count);
        });

        $(document).on( 'blur','.order_item_tax2_rate', function(){
          cal_final_total(count);
        });

        $(document).on('blur','.order_item_tax3_rate', function(){
          cal_final_total(count);
        });


      });
      </script>
     </html>